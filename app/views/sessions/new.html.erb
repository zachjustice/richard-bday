<div class="min-h-screen bg-page flex items-center justify-center p-6 max-sm:p-4 flex-col">
  <%= render "shared/login_doodles" %>
  <%= render "shared/login_branding" %>

  <div class="relative z-content card-primary animate-slide-up p-10 max-sm:p-8 max-w-md w-full">
    <div class="text-center mb-8">
      <h1 class="form-header max-sm:text-2xl">Join a Game</h1>
      <div class="text-base max-sm:text-sm text-accent-secondary mb-2">
        <% if @room&.current_game&.current_game_prompt && (Time.now - @room.created_at) < 1.day %>
          <span>It looks like you're already in a game.</span>
          <p class="font-bold"><%= link_to "Rejoin?", controller: "game_prompts", action: "show", id: @room.current_game.current_game_prompt %></p>
        <% elsif @room.present? && (Time.now - @room.created_at) < 1.day %>
          <span>It looks like you're already in a game.</span>
          <p class="font-bold"><%= link_to "Rejoin?", controller: "rooms", action: "show" %></p>
        <% end %>
      </div>
      <% if !@room %>
        <p class="form-subheader max-sm:text-sm">Enter your details to start playing</p>
      <% end %>
    </div>

    <%= form_with url: session_path, class: "flex flex-col gap-6" do |form| %>
      <div class="flex flex-col gap-2">
        <label for="name" class="form-label">
          <span class="text-lg">ðŸ‘¤</span>
          Username
        </label>
        <%= form.text_field :name,
            id: "name",
            required: true,
            autofocus: true,
            autocomplete: "off",
            placeholder: "What should we call you?",
            value: params[:username],
            maxlength: 15,
            class: "form-input" %>
      </div>

      <div class="flex flex-col gap-2">
        <label for="code" class="form-label">
          <span class="text-lg">ðŸ”‘</span>
          Room Code
        </label>
        <%= form.text_field :code,
            id: "code",
            value: params[:code],
            required: true,
            autocomplete: "off",
            placeholder: "Enter room code",
            maxlength: 72,
            class: "form-input uppercase tracking-widest font-bold" %>
      </div>

      <%= form.submit "Join Game", class: "btn-primary mt-4", data: { controller: "loading-button" } %>
    <% end %>

    <div class="mt-8 pt-6 text-center border-t-2 border-ink/10">
      <span class="text-sm body">
        <%= link_to "Start a new game instead", create_room_path %>
      </span>
    </div>
  </div>
</div>
