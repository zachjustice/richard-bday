<%= stylesheet_link_tag "login-page", "data-turbo-track": "reload" %>

<div class="login-container">
  <div class="login-card">
    <div class="login-header">
      <h1 class="login-title">Join a Game</h1>
      <div class="rejoin-game-link login-subtitle">
        <% if @room&.current_game&.current_game_prompt %>
          <span>It looks like you're already in a game.</span>
          <%= link_to "Rejoin?", controller: "prompts", action: "show", id: @room.current_game.current_game_prompt %>
        <% elsif @room.present? %>
          <span>It looks like you're already in a game.</span>
          <%= link_to "Rejoin?", controller: "rooms", action: "show" %>
        <% end %>
      </div>
      <% if !@room %>
        <div class="login-subtitle">
          <p class="login-subtitle">Enter your details to start playing</p>
        </div>
      <% end %>
    </div>

    <% if flash[:alert] %>
      <div class="alert-message">
        <span class="alert-icon">âš ï¸</span>
        <%= flash[:alert] %>
      </div>
    <% end %>

    <% if flash[:notice] %>
      <div class="notice-message">
        <span class="notice-icon">âœ“</span>
        <%= flash[:notice] %>
      </div>
    <% end %>

    <%= form_with url: session_path, class: "login-form" do |form| %>
      <div class="form-group">
        <label for="name" class="form-label">
          <span class="label-icon">ğŸ‘¤</span>
          Username
        </label>
        <%= form.text_field :name,
            id: "name",
            required: true,
            autofocus: true,
            autocomplete: "off",
            placeholder: "What should we call you?",
            value: params[:username],
            class: "form-input" %>
      </div>

      <div class="form-group">
        <label for="code" class="form-label">
          <span class="label-icon">ğŸ”‘</span>
          Room Code
        </label>
        <%= form.text_field :code,
            id: "code",
            value: params[:code],
            required: true,
            autocomplete: "off",
            placeholder: "Enter room code",
            maxlength: 72,
            class: "form-input room-code-input" %>
      </div>

      <%= form.submit "Join Game", class: "submit-button" %>
    <% end %>

    <div class="login-footer">
      <span class="start-game-link">
        <%= link_to "Start a new game instead", create_room_path %>
      </span>
    </div>
  </div>
</div>
