<div data-controller="music-player" data-turbo-permanent>
  <audio data-music-player-target="audio"></audio>

  <!-- Music Player Button -->
  <button
    class="music-player-button"
    data-action="click->music-player#openModal"
    title="Open Music Player">
    üéµ
  </button>

  <!-- Music Player Modal -->
  <div
    class="music-player-modal hidden"
    data-music-player-target="modal">
    <div class="music-player-backdrop" data-action="click->music-player#closeModal"></div>
    <div class="music-player-content">
      <!-- Header -->
      <div class="music-player-header">
        <div class="flex-1 min-w-0">
          <h2
            class="text-lg font-bold m-0 mb-1 whitespace-nowrap overflow-hidden text-ellipsis"
            data-music-player-target="songTitle">
            No song playing
          </h2>
          <p class="text-sm m-0">
            <a
              href="#"
              target="_blank"
              rel="noopener noreferrer"
              class="text-white underline opacity-90 hover:opacity-100"
              data-music-player-target="artistLink">
              <span data-music-player-target="artistName">Select a song</span>
            </a>
          </p>
        </div>
        <button
          class="music-player-close-btn"
          data-action="click->music-player#closeModal"
          aria-label="Close music player">
          ‚úï
        </button>
      </div>

      <!-- Playback Controls -->
      <div class="music-player-controls">
        <div class="flex justify-center items-center gap-4">
          <button
            class="control-btn"
            data-action="click->music-player#previousSong"
            title="Previous song">
            ‚èÆÔ∏è
          </button>

          <button
            class="control-btn play-pause"
            data-action="click->music-player#togglePlay"
            title="Play/Pause">
            <span data-music-player-target="playIcon">‚ñ∂Ô∏è</span>
            <span data-music-player-target="pauseIcon" class="hidden">‚è∏Ô∏è</span>
          </button>

          <button
            class="control-btn"
            data-action="click->music-player#nextSong"
            title="Next song">
            ‚è≠Ô∏è
          </button>
        </div>
        <div class="flex justify-between text-sm text-gray-500 mb-2 tabular-nums">
          <span data-music-player-target="currentTime">0:00</span>
          <span data-music-player-target="totalTime">0:00</span>
        </div>
        <div
          class="progress-bar-container"
          data-music-player-target="progressBar"
          data-action="click->music-player#seek">
          <div
            class="progress-bar-fill"
            data-music-player-target="progress">
          </div>
        </div>
      </div>

      <div class="flex flex-col m-4 min-h-0">
        <!-- Search -->
        <div class="shrink-0">
          <input
            type="text"
            class="music-search-input"
            placeholder="Search songs or artists..."
            data-music-player-target="searchInput"
            data-action="input->music-player#search">
        </div>

        <!-- Song List -->
        <div
          class="music-player-songs"
          data-music-player-target="songList">
          <div class="p-4 text-center text-gray-500">Loading songs...</div>
        </div>
      </div>
    </div>
  </div>
</div>
