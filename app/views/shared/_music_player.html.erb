<div data-controller="music-player" data-turbo-permanent>
  <audio data-music-player-target="audio"></audio>

  <!-- Music Player Button -->
  <button
    class="music-player-button"
    data-action="click->music-player#openModal"
    aria-label="Open Music Player">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M9 18V5l12-2v13"/>
      <circle cx="6" cy="18" r="3"/>
      <circle cx="18" cy="16" r="3"/>
    </svg>
  </button>

  <!-- Music Player Modal -->
  <div
    class="music-player-modal hidden"
    data-music-player-target="modal"
    role="dialog"
    aria-modal="true"
    aria-label="Music Player"
    aria-hidden="true">
    <div class="music-player-backdrop" data-action="click->music-player#closeModal"></div>
    <div class="music-player-content">
      <!-- Header -->
      <div class="music-player-header">
        <div class="flex-1 min-w-0">
          <h2
            class="text-lg font-bold m-0 mb-1 whitespace-nowrap overflow-hidden text-ellipsis"
            data-music-player-target="songTitle">
            No song playing
          </h2>
          <p class="text-sm m-0">
            <a
              href="#"
              target="_blank"
              rel="noopener noreferrer"
              class="text-ink-inverted underline opacity-90 hover:opacity-100"
              data-music-player-target="artistLink">
              <span data-music-player-target="artistName">Select a song</span>
            </a>
          </p>
        </div>
        <button
          class="modal-close-btn modal-close-btn--light"
          data-action="click->music-player#closeModal"
          aria-label="Close music player">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
            <path d="M4 4l12 12M16 4l-12 12"/>
          </svg>
        </button>
      </div>

      <!-- Playback Controls -->
      <div class="music-player-controls">
        <div class="flex justify-center items-center gap-4">
          <button
            class="control-btn"
            data-action="click->music-player#previousSong"
            aria-label="Previous song">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
            </svg>
          </button>

          <button
            class="control-btn play-pause"
            data-action="click->music-player#togglePlay"
            data-music-player-target="playPauseButton"
            aria-label="Play">
            <span data-music-player-target="playIcon" aria-hidden="true">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8 5v14l11-7z"/>
              </svg>
            </span>
            <span data-music-player-target="pauseIcon" class="hidden" aria-hidden="true">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
              </svg>
            </span>
          </button>

          <button
            class="control-btn"
            data-action="click->music-player#nextSong"
            aria-label="Next song">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
            </svg>
          </button>
        </div>
        <div class="flex justify-between text-sm body mb-2 tabular-nums">
          <span data-music-player-target="currentTime">0:00</span>
          <span data-music-player-target="totalTime">0:00</span>
        </div>
        <div
          class="progress-bar-container"
          data-music-player-target="progressBar"
          data-action="click->music-player#seek keydown->music-player#seekKeyboard"
          role="slider"
          aria-label="Song progress"
          aria-valuemin="0"
          aria-valuemax="100"
          aria-valuenow="0"
          aria-valuetext="0:00 of 0:00"
          tabindex="0">
          <div
            class="progress-bar-fill"
            data-music-player-target="progress">
          </div>
        </div>
      </div>

      <div class="flex flex-col m-4 min-h-0">
        <!-- Search -->
        <div class="shrink-0">
          <input
            type="text"
            class="form-input"
            placeholder="Search songs or artists..."
            data-music-player-target="searchInput"
            data-action="input->music-player#search"
            aria-label="Search songs or artists">
        </div>

        <!-- Song List -->
        <div
          class="music-player-songs scroll-fade-indicators"
          data-music-player-target="songList">
          <div class="p-4 text-center body">Loading songs...</div>
        </div>
      </div>
    </div>
  </div>
</div>
