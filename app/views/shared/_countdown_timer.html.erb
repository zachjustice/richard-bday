<%# Usage: <%= render "shared/countdown_timer", duration: 60, auto_start: true %\> %>
<%= stylesheet_link_tag "countdown-timer", "data-turbo-track": "reload" %>
<% duration ||= 60 %>
<% auto_start = local_assigns.fetch(:auto_start, true) %>
<div 
  class="countdown-timer" 
  data-controller="countdown-timer"
  data-countdown-timer-duration-value="<%= duration %>"
  data-countdown-timer-auto-start-value="<%= auto_start %>"
  data-phase="green">
  <svg class="countdown-timer-svg" viewBox="0 0 100 100">
    <circle 
      class="countdown-timer-circle-bg"
      cx="50" 
      cy="50" 
      r="45">
    </circle>
    <circle 
      class="countdown-timer-circle"
      cx="50" 
      cy="50" 
      r="45"
      data-countdown-timer-target="circle">
    </circle>
  </svg>
  <div 
    class="countdown-timer-display" 
    data-countdown-timer-target="display">
    1:00
  </div>
</div>