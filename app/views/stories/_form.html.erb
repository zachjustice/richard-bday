<%# app/views/stories/_form.html.erb %>
<%= form_with model: story, class: "flex flex-col gap-6" do |form| %>
  <div class="flex flex-col gap-2">
    <%= form.label :title, "Story Title", class: "font-semibold text-gray-900" %>
    <%= form.text_field :title,
        placeholder: "...",
        class: "story-form-input" %>
  </div>

  <% if story.persisted? %>
    <div class="flex flex-col gap-2">
      <%= form.label :text, "Story Text (with blanks)", class: "font-semibold text-gray-900" %>
      <%= form.text_area :text,
          rows: 12,
          placeholder: "Write your story here. Use {1}, {2}, etc. for blanks.",
          class: "story-form-textarea",
          data: {
            story_editor_target: "text",
            action: "input->story-editor#highlightBlanks"
          } %>
    </div>

    <div class="flex flex-col gap-2">
      <%= form.label :original_text, "Original Text (for reference)", class: "font-semibold text-gray-900" %>
      <%= form.text_area :original_text,
          rows: 6,
          placeholder: "Original unmodified version (optional)",
          class: "story-form-textarea" %>
    </div>

    <div class="flex flex-row items-center gap-3">
      <%= form.checkbox :published,
          class: "w-5 h-5 cursor-pointer accent-brand-purple" %>
      <%= form.label :published, "Publish?", class: "font-semibold text-gray-900" %>
    </div>
  <% end %>

  <div class="flex gap-4 pt-4">
    <%= form.submit story.persisted? ? "Update Story" : "Create Story",
        class: "btn-primary" %>
    <%= link_to "Cancel",
        story.persisted? ? story_path(story) : stories_path,
        class: "btn-secondary" %>
  </div>
<% end %>
