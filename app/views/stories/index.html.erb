<%# app/views/stories/index.html.erb %>
<div class="max-w-[1400px] w-full flex flex-col flex-1 p-8 md:p-4 m-auto">
  <div class="flex justify-between items-center mb-6 flex-wrap gap-4">
    <h1 class="text-3xl font-bold text-ink m-0 text-shadow-heading">Stories</h1>
    <div class="flex gap-4">
      <%= link_to "Create New Story", new_story_path, class: "btn-primary" %>
      <%= link_to "Prompts", prompts_index_path, class: "btn-secondary" %>
    </div>
  </div>

  <%# Search %>
  <div class="relative mb-6" data-controller="search" data-search-url-value="<%= stories_path %>">
    <div class="absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none">
      <svg class="w-5 h-5 text-ink/40" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
      </svg>
    </div>
    <input type="text"
           placeholder="Search stories..."
           class="w-full pl-12 pr-10 py-3 text-base font-medium rounded-xl border-2 border-ink/20 bg-white outline-none transition-all hover:border-ink focus:border-accent-secondary focus:ring-4 focus:ring-accent-secondary/10"
           data-search-target="input"
           data-action="input->search#search">
    <button class="absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-full hover:bg-ink/10 transition-colors hidden"
            data-search-target="clear"
            data-action="search#clear">
      <svg class="w-4 h-4 text-ink/40" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
      </svg>
    </button>
  </div>

  <%# Results (Turbo Frame) %>
  <turbo-frame id="results_list" class="flex-1 min-h-0">
    <%= render "stories/story_list", stories: @stories %>
  </turbo-frame>
</div>
