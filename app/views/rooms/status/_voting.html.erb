<%= turbo_stream_from "rooms:#{room.id}:votes" %>

<div class="flex-1 flex flex-col justify-start min-h-0">
  <div class="card-status-header-indigo">
    <%= render "shared/countdown_timer", duration: room.current_game.next_game_phase_time - Time.now - GameConstants::COUNTDOWN_FORGIVENESS_SECONDS, auto_start: true %>
    <h1 class="text-4xl font-bold text-ink mb-3 leading-tight">Vote for the best answer on your device!</h1>
    <div class="sr-only" aria-live="polite" aria-atomic="true" id="votes-status">
      <%= users.count(&:voted?) %> of <%= users.count %> players have voted
    </div>
  </div>

  <div class="card-status-content-indigo">
    <h3 class="text-xl font-bold text-ink mb-4 flex items-center gap-2">Votes</h3>
    <div class="flex flex-col flex-1 min-h-0 overflow-y-auto">
      <ul id="users-with-status-list" class="list-none p-0 m-0 gap-3 grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))]">
        <% users.each do |user| %>
          <%= render "rooms/partials/user_with_status_item", user: user, completed: user.voted?, color: "indigo" %>
        <% end %>
      </ul>
    </div>
  </div>
</div>
